<!DOCTYPE html>
<html lang="en">
<head>
    <title>Resilience Story of New York</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--meta data for sharing links on Facebook-->
    <meta property="og:title" content="Resilience New York"/>
    <meta property="og:url" content="http://geoviz.ceoas.oregonstate.edu/storymap/examples/2.5/video.html"/>
    <meta property="og:description" content="Resilience Storymap."/>
    <meta property="og:image" content="../../img/social.png"/>

    <!--add required stylesheets-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!--leaflet css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css">

    <!--add favicon for the web page-->
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <!-- add a favicon of NY big apple from website https://favicon.io/favicon-converter/-->

    <!--Fonts-->
    <link href="https://fonts.googleapis.com/css?family=Cairo" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/1.3.4/chroma.min.js"></script>

    <link rel="stylesheet" type="text/css" href="css/storymap.2.5.css">

    <!--add required libraries-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.js"></script>
    <!--jquery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>

    <!--boostrap-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <!--leaflet.ajax for asynchronously adding geojson data-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>

    <!--mini globle map-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/1.6.19/topojson.min.js"></script>
    <script src="js/Control.GlobeMiniMap.js"></script>

    <!--story map plugin-->
    <script src="js/storymap.2.5.js"></script>
</head>
<body>

<!--Navigations,container,and button -->
<nav class="navbar navbar-expand-lg bg-dark navbar-dark sticky-top">
  <a class="navbar-brand" href="New-York.png">
   <img src="img/New-York.png" alt="Logo" style="width:35px;">NYS</a>
  <div class="container-fluid">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item active">
          <a class="nav-link" href="#">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="description.html">Description</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="contact.html">Contact</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
<!-- Create Storymap -->
<div id="storymap" class="container-fluid">
    <div class="row">
        <div class="col-sm-6 col-md-4 storymap-story">

            <section data-scene="intro" data-background="img/nyvintage.mp4">
                <div class="fullscreen text-center">
                    <h1 class="display-4 d-flex justify-content-center">Resilience Story of New York</h1>
                    <strong class="d-flex justify-content-center" style="color: rgba(255,255,255,0.95)">This is the resilience story of New York State
                      in the face of COVID-19 pandemic
                    </strong>
                </div>
            </section>
            <section data-scene="income" style="background-color:black; color:white;">
                <h2><b>396-Year Old New York</b></h2>
                <p>New York was once named New Amsterdam, given by the Dutch who colonized this area along the Hudson River in 1624. It is under the reign of
                British Empire 40 years later that the name turned into New York. The New York State had significant role in American Revolution and long been a
                magnet for immigrants worldwide to work and reside. New York City is the largest city in the state and a home for nearly 20 million people.</p>
                <img src="img/NYC_vintage.jpg" width="500px" height="300px" class="img-responsive img-thumbnail" alt="responsive image" alt-text="Old New York">
                <p style="text-align:center;"><a href="https://untappedcities.com/2016/06/24/lost-in-old-new-york-vintage-photos-from-the-museum-of-the-city-of-new-york/">Countesy of MCNY</a></p>
                <br>
                <p>The state has 62 counties which are divided into about 1,500 towns and villages. Compared to other county governments, New Yowk relatively has a stronger governance with
                  many special districts and infrastructures like port, bridge, health, and regional market. The Port Authority is one of the largest special districts operating harbors and related facilities throughout New York City and New Jersey.</p>
                <img src="img/NYC_night2.jpg" width="500px" height="300px" class="img-responsive img-thumbnail" alt="responsive image"alt-text="NYC at midgnight">
                <p style="text-align:center;"><a href="https://www.pinterest.com/pin/171629435785355627">Countesy of PhotoMagazine</a></p>
                <br>
                <p>Being one of the wealthiest states in the USA does not mean that New York State does not struggle with issue of homelessness and poverty.
                  Leading the nation with the greatest divide between the wealthiest 1 percent of residents and the other 99 percent was New York state, according to the report by the Economic Policy Institute, a left-leaning think tank in Washington, D.C.
                  The average income of the top 1 percent in New York state was $2.2 million in 2015, while the average income of the bottom 99 percent was $49,617. The economy inequity is also associated with ethnicity and race. The map shows the Median
                  household income level throughout the U.S. states in 2020.</p>
                <img src="img/NYC_night2.jpg" width="500px" height="300px" class="img-responsive img-thumbnail" alt="responsive image"alt-text="NYC at midgnight">
                <p style="text-align:center;"><a href="https://www.pinterest.com/pin/171629435785355627">Countesy of PhotoMagazine</a></p>
            </section>

            <section data-scene="cases" style="background-color:black; color:white;" >
              <h2><b>New York Today</b></h2>
              <p>The coronavirus spread in the U.S. since March 2020 had drastically changed the way people live their lives. New York, specifically the NYC is the epicenter of the Pandemic in the U.S.
              Until May 15, 2020, the confirmed cases in New York State has reached about ..... and .... deaths. Compared to other states, the rapid spread of the virus in NY clearly signaled an urgent call of taking extreme measures, similar
              to what China and South Korea had done: lockdown and social distancing The independent expert maintained that people in poverty are disproportionately threatened by the coronavirus.
              “They are more likely to work in jobs with a high risk of exposure, live in crowded and insecure housing, reside in neighbourhoods that are more vulnerable because of air pollution,
              and lack access to healthcare”, he said.“Communities of colour, who face a persistent racial wealth gap, are at particular risk and are dying at much higher rates.”
              Additionally, the poor have fewer resources to cushion economic blows and are more susceptible to mass layoffs and pay cuts. </p>
              <img src="img/NYC_compare.jpg" width="500px" height="300px" class="img-responsive img-thumbnail" alt="responsive image" alt-text="Compared to other states">
              <p style="text-align:center;"><a href="https://untappedcities.com/2016/06/24/lost-in-old-new-york-vintage-photos-from-the-museum-of-the-city-of-new-york/">Countesy of MCNY</a></p>
              <br>
              <p>The fines for people not allowing the governor's executive order was between $500 and $ 1,000. The New York Governor stated that people did not take the order serioulsly</p>
              <img src="img/covid_patient.jpg" width="500px" height="300px" class="img-responsive img-thumbnail" alt="responsive image" alt-text="Stucked with Coronavirus">
              <p style="text-align:center;"><a href="https://untappedcities.com/2016/06/24/lost-in-old-new-york-vintage-photos-from-the-museum-of-the-city-of-new-york/">Countesy of MCNY</a></p>
              <p>People shared their personal stories in the face of the pandemic and asked one to another: "What's Your Quarantine Routine?" Others expressed their feelings through sketches.</p>
              <img src="img/NYC_Adinatudor_sketch.jpg" width="500px" height="300px" class="img-responsive img-thumbnail" alt="responsive image" alt-text="Stucked with Coronavirus">
              <p style="text-align:center;"><a href="https://untappedcities.com/2016/06/24/lost-in-old-new-york-vintage-photos-from-the-museum-of-the-city-of-new-york/">Countesy of MCNY</a></p>
            </section>

            <section data-scene="distancing" style="background-color:black; color:white;">
                <h2><b>Social Distancing</b></h2>
                <p>people got angry.</p>
                <img src="img/NYC_covid.jpg" width="500px" height="300px" class="img-responsive img-thumbnail" alt="responsive image" alt-text="outrage">
                <br>
            </section>

            <section data-scene="usaguns" style="background-color:black; color:white;">
                <h2><b>Outrage</b></h2>
                <p>people got angry.</p>
                <img src="img/NYC_covid.jpg" width="500px" height="300px" class="img-responsive img-thumbnail" alt="responsive image" alt-text="outrage">
                <br>
            </section>

            <section data-scene="food" style="background-color:black; color:white;">
                <h2><b>Solidarity</b></h2>
                <p>People are called to volunteer in this difficult and uncertain condition in New York. The map shows some of almost 150 food pantries that voluntarily provides
                  people with free food during the pandemic. Most of the pantries are organized by church and ethnicity-based institutions, and surprisingly, relied on retired seniors.
                  Since they can no longer safely leave their homes, the food pantry and kitchen are today run by young volunteers.
              </p>
                <img src="img/NYC_covid.jpg" width="500px" height="300px" class="img-responsive img-thumbnail" alt="responsive image" alt-text="farmer">
                <p>Besides foods, many organizations are now opening their doors to welcome homeless by providing them with shelters, transitional housing
                and services. These organizations normally required the homeless people to show their ID or proof of residence. One of these organizations is located on Winchester Blvd.</p>
                <img src="img/NYC_covid.jpg" width="500px" height="300px" class="img-responsive img-thumbnail" alt="responsive image" alt-text="farmer">
                <p>Medical staff who </p>
            </section>

            <section data-scene="resilience">
                <h2><b>Work Together</b></h2>
                <p>Resilience.</p>
                <img src="img/NY_worktogether.jpg" class="img-responsive img-thumbnail" alt="responsive image"
                     alt-text="change the mindset">
                <p>Then, ...</p>
            </section>

            <section data-scene="end" data-background="img/NY_worktogether.jpg">
                <div class="fullscreen text-center">
                    <h1 class="display-4 d-flex justify-content-center">Let's Embrace the New Normal</h1>
                    <small class="d-flex justify-content-center" style="color: rgba(255,255,255,0.95)">Your
                        Acknowledgement goes here
                    </small>
                </div>
            </section>

        </div>
        <!--map div-->
        <div class="col-sm-6 col-md-8 storymap-map"></div>
    </div>

    <dl>
        <dt>
            <!--facebook icon-->
            <a class="fab fa-facebook-square btn"
               href="https://facebook.com/sharer.php?u=http://geoviz.ceoas.oregonstate.edu/storymap/examples/2.5/video.html" style="top:40px"
               target="_blank"></a>
        </dt>
        <dt>
            <!--facebook icon-->
            <a class="fab fa-github btn" href="https://github.com/jakobzhao/storymap" style="top:60px"
               target="_blank"></a>
        </dt>
        <dt>
            <!--info icon-->
            <i class="fas fa-info-circle btn" style="top:80px" data-toggle="modal" data-target="#info-modal"></i>
        </dt>
    </dl>

    <!--the info page-->
    <div class="modal fade" id="info-modal" role="dialog">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">About</h4>
                </div>
                <div class="modal-body">
                    <p>This is a web map of resilience story of New York, which is a part of final project of GEOG 458
                      at the University of Washington,Seattle</p>
                    <p><b>storymap.js</b> | Released Date: 02/20/2017 | Version: 2.5 | MIT License </p>
                    <p><b>Author: Catharina Depari</b> | University of Washington | Seattle
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- main javascript -->
<script type="text/javascript">


    // Build up a set of colors from chroma category for Covid-19 cases in NYS
    var colors = chroma.scale(['lightyellow', 'darkred']).mode('lch').colors(7);
    function setColor(d) {
        var id = 0;
        if (d > 1000) { id = 6; }
        else if (d > 500) { id = 5; }
        else if (d > 400) { id = 4; }
        else if (d > 300) { id = 3; }
        else if (d > 200) { id = 2; }
        else if (d > 100) { id = 1; }
        else  { id = 0; }
        return colors[id];
      }
      // Set style function that sets fill color.md property
      function style(feature) {
          return {
              fillColor: setColor(feature.properties.cases),
              fillOpacity: 0.6,
              weight: 1,
              dashArray: '',
              opacity: 1,
              color: 'white'
          };
      }
    // Create Legend Contents in html format
    var cases_legend = L.control({position: 'topright'});
    cases_legend.onAdd = function () {
        // Create Div Element and Populate it with HTML
        var div = L.DomUtil.create('div', 'newyork_legend');
        div.innerHTML += '<b>Confirmed Cases</b><br />';
        div.innerHTML += '<i style="background: ' + colors[6] + '; opacity: 0.7"></i><p>1000+</p>';
        div.innerHTML += '<i style="background: ' + colors[5] + '; opacity: 0.7"></i><p>500-1000</p>';
        div.innerHTML += '<i style="background: ' + colors[4] + '; opacity: 0.7"></i><p>400-500</p>';
        div.innerHTML += '<i style="background: ' + colors[3] + '; opacity: 0.7"></i><p>300-400</p>';
        div.innerHTML += '<i style="background: ' + colors[2] + '; opacity: 0.7"></i><p>200-300</p>';
        div.innerHTML += '<i style="background: ' + colors[1] + '; opacity: 0.9"></i><p><100-200</p>';
        div.innerHTML += '<i style="background: ' + colors[0] + '; opacity: 0.3"></i><p><100</p>';
        return div;
      };
    var income_legend = '<i style="background:red ; opacity: 0.5"></i><p><b>income level</b></p>';
    var distancing_legend = '<i style="background: lightblue; opacity: 0.5"></i><p><b>social distancing</b></p>';
    var food_legend = '<i style="background: white; opacity: 0.5"></i><p><b>food pantry</b></p>';
    var usaguns_legend = '<i style="background: green; opacity: 0.5"></i><p><b>crime level</b></p>';
    var resilience_legend = '<i style="background: green; opacity: 0.5"></i><p><b>change mindset</b></p>';

    // Collect coordinates of voluntary-based food pantries in NY State
    var agatha = L.marker([40.902705, -73.840120]).bindPopup('Agatha House Foundation-Mobile Pantry'),
    newlife = L.marker([40.897907, -73.851802]).bindPopup('New Life Holiness Caring Hands Food Pantry'),
    frances = L.marker([40.895848, -73.853502]).bindPopup('Church of St. Frances of Rome'),
    grace = L.marker([40.891204, -73.849463]).bindPopup('The Grace Of God Ministries Church Inc'),
    bethany = L.marker([40.886684, -73.851744]).bindPopup('Bronx Bethany Community Corporation'),
    iglesia = L.marker([40.888046, -73.831602]).bindPopup('Iglesia De Dios Pentecostal'),
    gospel = L.marker([40.885628, -73.854643]).bindPopup('Faith Apostolic Gospel Temple'),
    shiloh = L.marker([40.886619, -73.860426]).bindPopup('Shiloh Temple Pentecostal Church'),
    luke = L.marker([40.885230, -73.859005]).bindPopup('St. Luke Senior Community Program'),
    aids = L.marker([40.885346, -73.859021]).bindPopup('Unique People Services-AIDS Programs, Inc'),
    bravo = L.marker([40.873347, -73.879182]).bindPopup('Project Bravo at Montefiore Medical Ctr'),
    solution = L.marker([40.865473, -73.886285]).bindPopup('Part of the Solution (POTS)'),
    sda  = L.marker([40.872047, -73.850098]).bindPopup('Victory SDA Church'),
    forsaken = L.marker([40.871528, -73.843986]).bindPopup('ABUNDANT GRACE FOR THE FORSAKEN FOOD PANTRY'),
    missionary = L.marker([40.865537, -73.918965]).bindPopup('Worldwide Missionary Movement'),
    jewish = L.marker([40.858192, -73.864905]).bindPopup('Jewish Community Council of Pelham Parkway'),
    baptist = L.marker([40.845982, -73.866053]).bindPopup('Christ Jesus Baptist Church'),
    paul = L.marker([40.834839, -73.862362]).bindPopup('St. Paul Lutheran Church'),
    family = L.marker([40.822905, -73.818947]).bindPopup('Family Worship Center Church of God of Prophecy'),
    spanish = L.marker([40.817399, -73.860665]).bindPopup('Spanish Soundview SDA'),
    sound = L.marker([40.820955, -73.864967]).bindPopup('Soundview Presbyterian Church'),
    sheep = L.marker([40.826508, -73.878490]).bindPopup('Feed My Sheep Community Pantry'),
    west = L.marker([40.808268, -73.881395]).bindPopup('West Side Campaign Against Hunger'),
    living = L.marker([40.817079, -73.889377]).bindPopup('Bronx Works The Living Room'),
    bright = L.marker([40.817455, -73.886820]).bindPopup('Bright Temple AME Church'),
    act = L.marker([40.601401, -73.978656]).bindPopup('Acts Community Development Corp'),
    lady = L.marker([40.594589, -73.967348]).bindPopup('Our Lady of Grace Parish Ministry'),
    kings = L.marker([40.596412, -73.940569]).bindPopup('Kings Bay Y Senior Center'),
    salt = L.marker([40.576683, -73.983487]).bindPopup('Salt & Sea Mission Church Inc.'),
    masbia = L.marker([40.626162, -73.964902]).bindPopup('Masbia of Flatbush'),
    salvation = L.marker([40.623559, -74.032159]).bindPopup('Salvation Army Bay Ridge Corps'),
    project = L.marker([40.641268, -74.133099]).bindPopup('Project Hospitality Inc.'),
    staten = L.marker([40.620944, -74.082631]).bindPopup('Staten Island Liberian Community'),
    our = L.marker([40.631949, -74.087140]).bindPopup('Our Lady of Good Counsel Church'),
    ame = L.marker([40.588906, -73.804645]).bindPopup('Bethel AME Church');

    var layers = {
      ESRI: {
        layer: L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}')},
      income1: {
          layer: L.geoJson.ajax('assets/nysmhi.geojson', {
           onEachFeature: function (feature, layer) {
             layer.bindPopup("<h6><b>County:</b></h6>" + feature.properties.NAME + " " +"<h6><b>Median Household Income ($):</b></h6>" +
          feature.properties.nysmhi_mhi),
          {sticky: true, className: "feature-label", permanent: false, direction: "center"};
           },
          pointToLayer: function (feature, latlng) {
          var id = 0;
          if (feature.properties.nysmhi_mhi == "<1700") { id = 0; }
          else if (feature.properties.nysmhi_mhi == "1700-2500") { id = 1; }
          else if (feature.properties.nysmhi_mhi == "2500-3300") { id = 2; }
          else if (feature.properties.nysmhi_mhi == "3300-4100") { id = 3; }
          else { id = 4; } // >$4100 median household income
          return L.marker(latlng, {
            icon: L.divIcon({className: 'fas fa-plane marker-color' + (id + 1).toString() }) });
          },
          //START HERE
          var color = new SIX.Color("hsl(0, 100%, 50%)"),
          function setColor(d) {
            var id = 0;
            if (d > 15) { id = 5; }
            else if (d > 15) { id = 4; }
            else if (d > 10) { id = 3; }
            else if (d > 5) { id = 2; }
            else if (d > 2) { id = 1; }
            else  { id = 0; }
            return colors[id];
          }
          function style(feature) {
            return {
              fillColor: setColor(feature.properties.nysmhi_mhi),
              fillOpacity: 0.6,
              weight: 1,
              dashArray: '',
              opacity: 1,
              color: 'white'
            };
          }
          states = L.geoJson.ajax("assets/nycases.geojson", {
            onEachFeature: onEachFeature,
            style: style
          });
          income1_legend = L.control({position: 'topright'});
          legend.onAdd = function () {
              var div = L.DomUtil.create('div', 'legend');
              div.innerHTML += '<b># Median Household Income</b><br />';
              div.innerHTML += '<i style="background: ' + colors[5] + '; opacity: 0.5"></i><p>15+</p>';
              div.innerHTML += '<i style="background: ' + colors[4] + '; opacity: 0.5"></i><p>10-15</p>';
              div.innerHTML += '<i style="background: ' + colors[3] + '; opacity: 0.5"></i><p>5-10</p>';
              div.innerHTML += '<i style="background: ' + colors[2] + '; opacity: 0.5"></i><p>2-5</p>';
              div.innerHTML += '<i style="background: ' + colors[1] + '; opacity: 0.5"></i><p>1-2</p>';
              div.innerHTML += '<i style="background: ' + colors[0] + '; opacity: 0.5"></i><p>0</p>';
              div.innerHTML += '<hr><b>Median Household Income<b><br />';
              div.innerHTML += '<i class="fas fa-plane marker-color-1"></i><p>Available</p>';
              div.innerHTML += '<i class="fas fa-plane marker-color-2"></i><p>Not Available</p>';
              return div;
          };
            //END HERE
              // color: '#75d6f9',
              // weight: 4,
              // opacity: 0.1
            }),
          },
    cases1: {
      layer: L.geoJson.ajax('assets/nycases.geojson', {
        onEachFeature: function (feature, layer) {
          layer.bindPopup("p><b>" + feature.properties.NAME + " " +"<p><b>" + feature.properties.cases + "</b></p>",
        {sticky: false, className: "feature-label", permanent: false, offset: [-1, -1]});
      },
      color: 'deepskyblue',
      weight: 2,
      opacity: 0.3
      }), legend: cases_legend
    },
    distancing: {
      layer: L.geoJson.ajax('assets/tweets.geojson', {
        //marker
        weight: 2,
        opacity: 0.3
      }), legend: distancing_legend
    },

    food: {
      layer: L.layerGroup([agatha, newlife,frances,grace,bethany, iglesia, gospel, shiloh,luke, aids, bravo, solution, sda,forsaken, missionary, jewish, baptist, paul,family,spanish,
        sound,sheep, west, living, bright, act, lady, kings,salt, masbia, salvation, project, staten, our, ame]) // markers with icon
      },

    usaguns: {
      layer: L.geoJson.ajax('assets/usaguns.geojson', {
        style: style,
        onEachFeature: function (feature, layer) {
          layer.bindPopup("<h6><b>County:</b></h6>" + feature.properties.name + " " +"<h6><b>Registered Guns:</b></h6>" + feature.properties.reg);
        }
      }), legend: usaguns_legend
    },

    tiles: {
      layer: L.tileLayer('assets/tiles/{z}/{x}/{y}.png', {
        tms: true,
        attribution: 'Generated by QMetaTiles',
        detectRetina: true,
        tiled: true,
        maxZoom: 14,
        minZoom: 0,
        continuousWorld: true
      }),
    },
  cartodb_light: {
    layer: L.tileLayer('http://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png', {
      attribution: "Generated by QMetaTiles",
      detectRetina: true,
      tileSize: 512,
      zoomOffset: -1
    })
  }
};
    var scenes = {
        intro: {lat: 44.0000000, lng: -123.5000000, zoom: 7, name: 'Cover Page', layers: []},
        income: {lat:42.541, lng: -75.291, zoom: 6.5, maxZoom: 14, minZoom: 2, name: 'income', layers: [layers.income1, layers.cartodb_light]}, // income level, scale : NYS
        cases: {lat:42.541, lng: -75.291, zoom: 6.5, name: 'cases', layers: [layers.cases1, layers.cartodb_light]}, //cases of covid, scale: NYS
        distancing: {lat:42.541, lng: -75.291, zoom: 6.5, name: 'distancing', layers: [layers.tweets, layers.cartodb_light]}, //tweets scale: NYS
        usaguns: {lat:39.38, lng: -97.92, zoom: 3, name: 'usaguns', layers: [layers.usaguns, layers.cartodb_light]}, // protests, USA
        food: {lat:40.848, lng: -73.864, zoom: 12.5, name: 'food', layers: [layers.food, layers.cases1, layers.cartodb_light]}, // food, scale: NYS
        resilience: {lat:40.848, lng: -73.864, zoom: 12.5, name: 'resilience', layers: [layers.GEE]}, // environment
        end: {lat: 44.0000000, lng: -123.5000000, zoom: 7, name: 'New Normal'}
    };

    $('#storymap').storymap({
        scenes: scenes,
        baselayer: layers.cartodb_light,
        legend: true, // if you do not want a legend feature, you can simply not define the createLegend function.
        credits: "",
        loader: true,
        legend: true,
        scalebar: true,
        fly: false,
        scrolldown: true,
        progressline: true,
        navwidget: true,

        createMap: function () {
            // create a map in the "map" div, set the view to a given place and zoom
            var map = L.map($(".storymap-map")[0], {
                zoomControl: false,
                scrollWheelZoom: false,
                fadeAnimation: true,
                zoomAnimation: true
            }).setView([42.541, -75.291], 7);

            // add an miniglobe
            var miniglobe = new L.Control.GlobeMiniMap({
              marker: 'red',
              position: 'bottomright',
              topojsonSrc: 'js/world.json',
              attribution: 'Chris Whong'
              // https://github.com/chriswhong/leaflet-globeminimap/blob/master/example/index.html
            }).addTo(map);

            return map;
        }
    });
</script>
</body>
</html>
